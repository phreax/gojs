/*!
 * jCanvaScript JavaScript Library v 1.5.11
 * http://jcscript.com/
 *
 * Copyright 2011, Alexander Savin
 * Dual licensed under the MIT or GPL Version 2 licenses.
 */
(function(ab,z){var ad=[],ah=Math,f=ah.PI,v=f*2,X=0,S=0,N=false,V=/[A-z]+?/,Q=/\d.\w\w/,a=ab.navigator.userAgent.match(/Firefox\/\w+\.\w+/i),E=180/f,U=ah.max,i=ah.min,y=ah.cos,L=ah.sin,O=ah.floor,p=ah.round,Z=ah.abs,Y=ah.pow,an=ah.sqrt,M=1000/60,c=(function(){return ab.requestAnimationFrame||ab.webkitRequestAnimationFrame||ab.mozRequestAnimationFrame||ab.oRequestAnimationFrame||ab.msRequestAnimationFrame||function(ap,m){return setTimeout(ap,M)}})(),I=(function(){return ab.cancelAnimationFrame||ab.webkitCancelRequestAnimationFrame||ab.mozCancelRequestAnimationFrame||ab.oCancelRequestAnimationFrame||ab.msCancelRequestAnimationFrame||clearTimeout})();if(a!=""&&a!==null){var A=(parseInt(a[0].split(/[ \/\.]/i)[1])<7)}function ag(ar,ap,au){var av=ad[ar].layers[ap].objs,aw=ad[ar].layers[ap].grdntsnptrns,aq=av.length,at=aw.length;au=au.slice(1);for(var m=0;m<aq;m++){if(av[m].optns.id==au){return av[m]}}for(m=0;m<at;m++){if(aw[m].optns.id==au){return aw[m]}}return false}function ak(aq,ap,av,ax){var ar=ad[aq].layers[ap].objs,aw=ad[aq].layers[ap].grdntsnptrns,au=ar.length,at=aw.length;ax=ax.slice(1);for(var m=0;m<au;m++){if(ar[m]._name==ax){av.elements.push(ar[m])}}for(m=0;m<at;m++){if(aw[m]._name==ax){av.elements.push(aw[m])}}return av}function B(ar,ap,at){var av=ad[ar].layers[ap].objs,aw=ad[ar].layers[ap].grdntsnptrns,aq=av.length,au=aw.length;for(var m=0;m<aq;m++){at.elements.push(av[m])}for(m=0;m<au;m++){at.elements.push(aw[m])}return at}var P=function(aB,m){if(aB===z){return this}if(typeof aB=="object"){m=aB;aB=z}var aA=-1,ar=-1,ap=ad.length,az=G(),aw,at,aq,ax,av,au,ay;if(m===z){if(aB.charAt(0)=="#"){for(aw=0;aw<ap;aw++){ay=ad[aw].layers.length;for(at=0;at<ay;at++){au=ag(aw,at,aB);if(au){return au}}}}if(aB.charAt(0)=="."){for(aw=0;aw<ap;aw++){ay=ad[aw].layers.length;for(at=0;at<ay;at++){az=ak(aw,at,az,aB)}}}}else{if(m.canvas!==z){for(aw=0;aw<ap;aw++){if(ad[aw].optns.id==m.canvas){aA=aw;aq=ad[aw];break}}}if(m.layer!==z){if(aA!=-1){ay=aq.layers.length;for(aw=0;aw<ay;aw++){if(aq.layers[aw].optns.id==m.layer){ar=aw;ax=aq.layers[aw];break}}}else{for(aw=0;aw<ap;aw++){av=ad[aw].layers;ay=av.length;for(at=0;at<ay;at++){if(av[at].optns.id==m.layer){aA=aw;ar=at;aq=ad[aw];ax=aq.layers[at];break}}if(ax>-1){break}}}}if(ar<0&&aA<0){return G()}if(ar<0){av=aq.layers;ay=av.length;if(aB===z){for(at=0;at<ay;at++){az=B(aA,at,az)}}else{if(aB.charAt(0)=="#"){for(at=0;at<ay;at++){au=ag(aA,at,aB);if(au){return au}}}else{if(aB.charAt(0)=="."){for(at=0;at<ay;at++){az=ak(aA,at,az,aB)}}}}}else{if(aB===z){az=B(aA,ar,az)}if(aB.charAt(0)=="#"){return ag(aA,ar,aB)}if(aB.charAt(0)=="."){az=ak(aA,ar,az,aB)}}}if(m!==z){if(m.attrs!==z||m.fns!==z){return az.find(m)}}if(az.elements.length){return az}return G()};function k(ap){var m=ap.optns;ap.matrix(o(o(o(m.transformMatrix,m.translateMatrix),m.scaleMatrix),m.rotateMatrix));j(ap)}function ae(m,aq){for(var ap in aq){if(m[ap]===z){m[ap]=aq[ap]}}return m}function j(m){D(m).optns.redraw=1}function F(at){var ap=at.timeDiff,m=1;for(var aq=0;aq<this.animateQueue.length;aq++){var aw=this.animateQueue[aq],av=aw.duration,ax=aw.easing,au=aw.step,ay=aw.onstep,ar=ax.type=="in"||(ax.type=="inOut"&&m<0.5),aB=ax.type=="out"||(ax.type=="inOut"&&m>0.5);aw.step+=ap;m=au/av;for(var aD in aw){if(this[aD]!==z&&aw[aD]){var aC=aw[aD],aA=aC.to,az=aC.from;H(aD,this,aw);if(ar){this[aD]=(aA-az)*h[ax.fn](m,ax)+az}if(aB){this[aD]=(aA-az)*(1-h[ax.fn](1-m,ax))+az}if(ay){ay.fn.call(this,ay)}if(au>=av){this[aD]=aA;H(aD,this,aw);aw[aD]=false;aw.animateKeyCount--;if(!aw.animateKeyCount){if(aw.animateFn){aw.animateFn.apply(this)}this.animateQueue.splice(aq,1);aq--}}}}}if(this.animateQueue.length){j(this)}else{this.optns.animated=false}return this}function H(aq,ap,m){var at=ap[aq];var ar=m[aq]["prev"];switch(aq){case"_rotateAngle":ap.rotate(at-ar,ap._rotateX,ap._rotateY);break;case"_translateX":ap.translate(at-ar,0);break;case"_translateY":ap.translate(0,at-ar);break;case"_translateToX":ap.translateTo(at,z);break;case"_translateToY":ap.translateTo(z,at);break;case"_scaleX":if(!ar){ar=1}ap.scale(at/ar,1);break;case"_scaleY":if(!ar){ar=1}ap.scale(1,at/ar);break;default:return}m[aq]["prev"]=at}function af(aq,ap,m){aq=aq||ab.event;m[ap].event=aq;m[ap].code=aq.charCode||aq.keyCode;m[ap].val=true;m.redraw=1}function u(ar,aq,ap){if(!ap[aq].val){return}ar=ar||ab.event;var m={pageX:ar.pageX||ar.clientX,pageY:ar.pageY||ar.clientY};ap[aq].event=ar;ap[aq].x=m.pageX-ap.x;ap[aq].y=m.pageY-ap.y;ap.redraw=1}function x(ap,m){if(ap===z){this["on"+m]()}else{this["on"+m]=ap}if(m=="mouseover"||m=="mouseout"){m="mousemove"}D(this).optns[m].val=true;return this}function am(ap,m){if(ap===z){this[m]()}else{this[m]=ap}return this}var h={linear:function(m,ap){return m},exp:function(m,ap){var aq=ap.n||2;return Y(m,aq)},circ:function(m,ap){return 1-an(1-m*m)},sine:function(m,ap){return 1-L((1-m)*f/2)},back:function(ap,aq){var ar=aq.n||2;var m=aq.x||1.5;return Y(ap,ar)*((m+1)*ap-m)},elastic:function(at,au){var av=au.n||2;var aq=au.m||20;var ar=au.k||3;var ap=au.x||1.5;return Y(av,10*(at-1))*y(aq*at*f*ap/ar)},bounce:function(aq,au){var av=au.n||4;var ap=au.b||0.25;var at=[1];for(var ar=1;ar<av;ar++){at[ar]=at[ar-1]+Y(ap,ar/2)}var m=2*at[av-1]-1;for(ar=0;ar<av;ar++){if(m*aq>=(ar>0?2*at[ar-1]-1:0)&&m*aq<=2*at[ar]-1){return Y(m*(aq-(2*at[ar]-1-Y(ap,ar/2))/m),2)+1-Y(ap,ar)}}return 1}},g={color:{fn:function(av,m,aq,au){var ap,at,ar;aq=aq[au];for(at=0;at<av;at++){for(ar=0;ar<m;ar++){ap=this.getPixel(at,ar);ap[aq[0]]=ap[aq[0]]*2-ap[aq[1]]-ap[aq[2]];ap[aq[1]]=0;ap[aq[2]]=0;ap[aq[0]]=ap[aq[0]]>255?255:ap[aq[0]];this.setPixel(at,ar,ap)}}},matrix:{red:[0,1,2],green:[1,0,2],blue:[2,0,1]}},linear:{fn:function(ap,aA,ay,ax){var az=[],ar,aw,av,au,at,aq;ay=ay[ax];at=ay.length;aq=ay[0].length;for(aw=0;aw<ap;aw++){az[aw]=[];for(av=0;av<aA;av++){az[aw][av]=[0,0,0,1];for(at=0;at<3;at++){for(aq=0;aq<3;aq++){ar=this.getPixel(aw-parseInt(at/2),av-parseInt(aq/2));for(au=0;au<3;au++){az[aw][av][au]+=ar[au]*ay[at][aq]}}}}}for(aw=0;aw<ap;aw++){for(av=0;av<aA;av++){this.setPixel(aw,av,az[aw][av])}}},matrix:{sharp:[[-0.375,-0.375,-0.375],[-0.375,4,-0.375],[-0.375,-0.375,-0.375]],blur:[[0.111,0.111,0.111],[0.111,0.111,0.111],[0.111,0.111,0.111]]}}};function o(ap,m){return[[(ap[0][0]*m[0][0]+ap[0][1]*m[1][0]),(ap[0][0]*m[0][1]+ap[0][1]*m[1][1]),(ap[0][0]*m[0][2]+ap[0][1]*m[1][2]+ap[0][2])],[(ap[1][0]*m[0][0]+ap[1][1]*m[1][0]),(ap[1][0]*m[0][1]+ap[1][1]*m[1][1]),(ap[1][0]*m[0][2]+ap[1][1]*m[1][2]+ap[1][2])]]}function t(aq,ar,ap){return{x:(aq*ap[0][0]+ar*ap[0][1]+ap[0][2]),y:(aq*ap[1][0]+ar*ap[1][1]+ap[1][2])}}function ac(aq,ar,ap){return{x:(aq*ap[1][1]-ar*ap[0][1]+ap[0][1]*ap[1][2]-ap[1][1]*ap[0][2])/(ap[0][0]*ap[1][1]-ap[1][0]*ap[0][1]),y:(-aq*ap[1][0]+ar*ap[0][0]-ap[0][0]*ap[1][2]+ap[1][0]*ap[0][2])/(ap[0][0]*ap[1][1]-ap[1][0]*ap[0][1])}}function b(ay,aD,aC){if(aC=="poor"){return aD}var az={x:aD.x,y:aD.y},aE={x:aD.x+aD.width,y:aD.y+aD.height},av=o(ay.matrix(),ai(ay).matrix()),aA=t(az.x,az.y,av),ax=t(aE.x,az.y,av),at=t(az.x,aE.y,av),ar=t(aE.x,aE.y,av),aF=[[aA.x,aA.y],[ax.x,ax.y],[at.x,at.y],[ar.x,ar.y]];if(aC=="coords"){return aF}var aw,au,aq=aw=aA.x,ap=au=aA.y;for(var aB=0;aB<4;aB++){if(aq<aF[aB][0]){aq=aF[aB][0]}if(ap<aF[aB][1]){ap=aF[aB][1]}if(aw>aF[aB][0]){aw=aF[aB][0]}if(au>aF[aB][1]){au=aF[aB][1]}}return{x:aw,y:au,width:aq-aw,height:ap-au}}function R(ap,m,aq){if(aq=="poor"){return m}return t(m.x,m.y,o(ap.matrix(),ai(ap).matrix()))}function s(ar){var ap={color:{val:ar,notColor:z},r:0,g:0,b:0,a:1};if(ar.id!==z){ap.color.notColor={level:ar._level,canvas:ar.optns.canvas.number,layer:ar.optns.layer.number};return ap}if(ar.r!==z){ap=ae(ar,{r:0,g:0,b:0,a:1});ap.color={val:"rgba("+ap.r+","+ap.g+","+ap.b+","+ap.a+")",notColor:z};return ap}if(ar.charAt(0)=="#"){ap.r=parseInt(ar.substr(1,2),16);ap.g=parseInt(ar.substr(3,2),16);ap.b=parseInt(ar.substr(5,2),16)}else{var m=ar.split(",");if(m.length==4){var aq=m[0].split("(");var au=m[3].split(")");ap.r=parseInt(aq[1]);ap.g=parseInt(m[1]);ap.b=parseInt(m[2]);ap.a=parseFloat(au[0])}if(m.length==3){aq=m[0].split("(");var at=m[2].split(")");ap.r=parseInt(aq[1]);ap.g=parseInt(m[1]);ap.b=parseInt(at[0])}}ap.color.notColor=z;return ap}function C(m){if(m.getBoundingClientRect){return r(m)}else{return ao(m)}}function ao(m){var aq=0,ap=0;while(m){aq=aq+parseInt(m.offsetTop);ap=ap+parseInt(m.offsetLeft);m=m.offsetParent}return{top:aq,left:ap}}function r(ar){var av=ar.getBoundingClientRect();var aw=document.body||{};var ap=document.documentElement;var m=ab.pageYOffset||ap.scrollTop||aw.scrollTop;var at=ab.pageXOffset||ap.scrollLeft||aw.scrollLeft;var au=ap.clientTop||aw.clientTop||0;var ax=ap.clientLeft||aw.clientLeft||0;var ay=av.top+m-au;var aq=av.left+at-ax;return{top:p(ay),left:p(aq)}}function aj(ap,m){q(ap,m);al(ap,m)}function al(ap,m){if(!ap.optns.focused){return}if(m.keyDown.val!=false){if(typeof ap.onkeydown=="function"){ap.onkeydown(m.keyDown)}}if(m.keyUp.val!=false){if(typeof ap.onkeyup=="function"){ap.onkeyup(m.keyUp)}}if(m.keyPress.val!=false){if(typeof ap.onkeypress=="function"){ap.onkeypress(m.keyPress)}}}function K(at,ap,aw){var m={};var ar=D(at);var aq=ar.optns.ctx;var av=ar.layers[at.optns.layer.number];m.x=ap;m.y=aw;if(A){m=ac(ap,aw,av.matrix());m=ac(m.x,m.y,at.matrix())}if(aq.isPointInPath===z||at._img!==z||at._imgData!==z||at._proto=="text"){var au=at.getRect("poor");m=ac(ap,aw,o(at.matrix(),av.matrix()));if(au.x<=m.x&&au.y<=m.y&&(au.x+au.width)>=m.x&&(au.y+au.height)>=m.y){return m}}else{if(aq.isPointInPath(m.x,m.y)){return m}}return false}function q(aq,m){var aw=false,ap=m.mousemove,au=m.mousedown,ay=m.mouseup,ar=m.click,ax=m.dblclick,av=ap.x||au.x||ay.x||ax.x||ar.x,at=ap.y||au.y||ay.y||ax.y||ar.y;if(av!=false){aw=K(aq,av,at)}if(aw){if(ap.x!=false){ap.object=aq}if(au.x!=false){au.objects[au.objects.length]=aq}if(ar.x!=false){ar.objects[ar.objects.length]=aq}if(ax.x!=false){ax.objects[ax.objects.length]=aq}if(ay.x!=false){ay.objects[ay.objects.length]=aq}m.point=aw}}function ai(m){return D(m).layers[m.optns.layer.number]}function D(m){return ad[m.optns.canvas.number]}function e(aw,m,ar){j(m);var ap=m.optns.canvas;var aq=m.optns.layer;if(aw===z){return aq.id}if(aq.id==aw){return m}var at={i:ap.number,j:aq.number};aq.id=aw;var av=P.layer(aw);var ax={i:av.optns.canvas.number,j:av.optns.number};var au=ad[at.i].layers[at.j][ar],ay=ad[ax.i].layers[ax.j][ar];au.splice(m.optns.number,1);m._level=m.optns.number=ay.length;ay[m._level]=m;aq.number=ax.j;ap.number=ax.i;ap.id=av.optns.canvas.id;j(m);return m}function J(ar,aq){for(var ap in aq){switch(typeof aq[ap]){case"function":if(ap.substr(0,2)=="on"){break}if(ar[ap]===z){ar[ap]=aq[ap]}break;case"object":if(ap=="optns"||ap=="animateQueue"){break}if(ap=="objs"||ap=="grdntsnptrns"){for(var m in aq[ap]){if(aq[ap].hasOwnProperty(m)){aq[ap][m].clone().layer(ar.optns.id)}}break}if(!aq[ap]||ap==="ctx"){continue}ar[ap]=typeof aq[ap].pop==="function"?[]:{};J(ar[ap],aq[ap]);break;default:if(ap=="_level"){break}ar[ap]=aq[ap]}}}function n(au,m,at){j(m);var ap=m.optns.canvas;var ar=m.optns.layer;if(au===z){return ad[ap.number].optns.id}if(ad[ap.number].optns.id==au){return m}var av={i:ap.number,j:ar.number};P.canvas(au);for(var aq=0;aq<ad.length;aq++){var ay=ad[aq];if(ay.optns.id==au){var aw=ad[av.i].layers[av.j][at],ax=ay.layers[0][at];aw.splice(m.optns.number,1);d(aw);m._level=m.optns.number=ax.length;ax[m._level]=m;ar.number=0;ap.number=aq;ap.id=ay.optns.id;ar.id=ay.layers[0].optns.id}}j(m);return m}function d(ap){for(var m=0;m<ap.length;m++){ap[m].optns.number=m}}function l(aw,ax,ay,aq,av){var ar=aw.length,m,ap,au;for(var at=0;at<ar;at++){m=aw[at].optns;ap=m.canvas;au=m.layer;ap.id=aq;ap.number=av;au.id=ax;au.number=ay}}function T(m){m.sort(function(aq,ap){if(aq._level>ap._level){return 1}if(aq._level<ap._level){return -1}return 0});d(m);return m.length}function W(aq){var ap;do{ap=false;for(var m=0;m<aq.length;m++){if(aq[m].optns.deleted){aq.splice(m,1);ap=true}}}while(ap);d(aq);return aq.length}var w={};w.object=function(){this.getCenter=function(ap){var aq=this.getRect("poor"),m={x:(aq.x*2+aq.width)/2,y:(aq.y*2+aq.height)/2};return R(this,m,ap)};this.position=function(){return t(this._x,this._y,o(this.matrix(),ai(this).matrix()))};this.buffer=function(au){var aq=this.optns.buffer;if(au===z){if(aq.val){return aq.cnv}else{return false}}if(aq.val===au){return this}if(au){var ap=aq.cnv=document.createElement("canvas"),m=aq.ctx=ap.getContext("2d"),at=aq.rect=this.getRect(),ar=this.transform();ap.setAttribute("width",at.width);ap.setAttribute("height",at.height);aq.x=this._x;aq.y=this._y;aq.dx=this._transformdx;aq.dy=this._transformdy;this._x=this._y=0;this.transform(1,0,0,1,-at.x+aq.dx,-at.y+aq.dy,true);this.setOptns(m);J(aq.optns={},D(this).optns);aq.optns.ctx=m;this.draw(aq.optns);this._x=aq.x;this._y=aq.y;this.transform(ar[0][0],ar[1][0],ar[0][1],ar[1][1],at.x,at.y,true);aq.val=true}else{this.translate(-aq.rect.x+aq.dx,-aq.rect.y+aq.dy);this.optns.buffer={val:false}}return this};this.clone=function(m){var ap=new w[this._proto];w[this._proto].prototype.base.call(ap);J(ap,this);ap.layer(ai(this).optns.id);J(ap.optns.transformMatrix,this.optns.transformMatrix);J(ap.optns.translateMatrix,this.optns.translateMatrix);J(ap.optns.scaleMatrix,this.optns.scaleMatrix);J(ap.optns.rotateMatrix,this.optns.rotateMatrix);if(m===z){return ap}return ap.animate(m)};this.shadow=function(ap){for(var aq in ap){switch(aq){case"x":this._shadowX=ap.x;break;case"y":this._shadowY=ap.y;break;case"blur":this._shadowBlur=ap.blur;break;case"color":var m=s(ap.color);this._shadowColor=ap.color.val;this._shadowColorR=m.r;this._shadowColorG=m.g;this._shadowColorB=m.b;this._shadowColorA=m.a;break}}j(this);return this};this.setOptns=function(m){m.globalAlpha=this._opacity;m.shadowOffsetX=this._shadowX;m.shadowOffsetY=this._shadowY;m.shadowBlur=this._shadowBlur;m.globalCompositeOperation=this._composite;m.shadowColor="rgba("+this._shadowColorR+","+this._shadowColorG+","+this._shadowColorB+","+this._shadowColorA+")";m.transform(this._transform11,this._transform12,this._transform21,this._transform22,this._transformdx,this._transformdy);return this};this.up=function(ap){if(ap===z){ap=1}if(ap=="top"){this.level(ap)}else{var m=ai(this).objs[this.optns.number+ap];if(m!==z){ap=m._level+1-this._level}this.level(this._level+ap)}return this};this.down=function(ap){if(ap==z){ap=1}if(ap=="bottom"){this.level(ap)}else{var m=ai(this).objs[this.optns.number-ap];if(m!==z){ap=this._level-(m._level-1)}this.level(this._level-ap)}return this};this.level=function(ap){if(ap==z){return this._level}var m=ai(this);if(ap=="bottom"){if(this.optns.number==0){ap=this._level}else{ap=m.objs[0]._level-1}}if(ap=="top"){if(this.optns.number==m.objs.length){ap=this._level}else{ap=m.objs[m.objs.length-1]._level+1}}this._level=ap;m.optns.anyObjLevelChanged=true;j(this);return this};this.del=function(){this.optns.deleted=true;ai(this).optns.anyObjDeleted=true;j(this)};this.focus=function(m){if(m===z){this.optns.focused=true;if(typeof this.onfocus=="function"){this.onfocus()}}else{this.onfocus=m}return this};this.blur=function(m){if(m===z){this.optns.focused=false;if(typeof this.onblur=="function"){this.onblur()}}else{this.onblur=m}return this};this.click=function(m){return x.call(this,m,"click")};this.dblclick=function(m){return x.call(this,m,"dblclick")};this.keypress=function(m){return am.call(this,m,"onkeypress")};this.keydown=function(m){return am.call(this,m,"onkeydown")};this.keyup=function(m){return am.call(this,m,"onkeyup")};this.mousedown=function(m){return x.call(this,m,"mousedown")};this.mouseup=function(m){return x.call(this,m,"mouseup")};this.mousemove=function(m){return x.call(this,m,"mousemove")};this.mouseover=function(m){return x.call(this,m,"mouseover")};this.mouseout=function(m){return x.call(this,m,"mouseout")};this.attr=function(aq,ap){if(typeof aq==="object"){var m=aq}else{if(ap===z){return this["_"+aq]}m={};m[aq]=ap}return this.animate(m)};this.queue=function(){var aq=this.animateQueue.length,m,au,at,aw=0,ap=0,av,ar=arguments;for(au=0;au<ar.length;au++){if(typeof ar[au]=="function"){ar[au].apply(this);ar[au]=false;au++;if(this.animateQueue.length>aq){for(at=aq;at<this.animateQueue.length;at++){m=this.animateQueue[at];if(m.duration!==z){if(m.duration>aw){aw=m.duration;ap=at}break}}if(aw){m=this.animateQueue[ap];if(m.animateFn){av=m.animateFn;m.animateFn=function(){av.apply(this);this.queue.apply(this,ar)}}else{m.animateFn=function(){this.queue.apply(this,ar)}}break}}}}};this.stop=function(ar,at){this.optns.animated=false;if(at===z){at=false}if(ar===z){ar=false}for(var aq=0;aq<this.animateQueue.length;aq++){var m=this.animateQueue[aq];if(at){m.animateFn.call(this)}if(ar){for(var ap in m){if(m[ap]["from"]!==z){this[ap]=m[ap]["to"];H(ap,this,m)}}}}this.animateQueue=[];return this};this.animate=function(az,m,at,au,av){if(m===z){m=1}else{if(typeof m=="function"){av=m;m=1}if(typeof m=="object"){at=m;m=1}}if(at===z){at={fn:"linear",type:"in"}}else{if(typeof at=="function"){av=at;at={fn:"linear",type:"in"}}if(at.type===z){at.type="in"}}if(au===z){au=false}else{if(typeof au=="function"){av=au;au=false}}if(az.scale!==z){this._scaleX=this._scaleY=1;if(typeof az.scale!="object"){az.scaleX=az.scaleY=az.scale}else{az.scaleX=az.scale.x||1;az.scaleY=az.scale.y||1}}if(az.translate!==z){this._translateX=this._translateY=0;if(typeof az.translate!="object"){az.translateX=az.translateY=az.translate}else{az.translateX=az.translate.x||0;az.translateY=az.translate.y||0}az.translate=z}if(az.translateTo!==z){var ax=this.position();this._translateToX=ax.x;this._translateToY=ax.y;if(typeof az.translateTo!="object"){az.translateToX=az.translateToY=az.translateTo}else{az.translateToX=az.translateTo.x||0;az.translateToY=az.translateTo.y||0}az.translateTo=z}if(az.rotate!==z){az.rotateAngle=az.rotate.angle;this._rotateAngle=0;this._rotateX=az.rotate.x||0;this._rotateY=az.rotate.y||0;az.rotate=z}if(az.color!==z){var aq=s(az.color);if(aq.color.notColor){this.optns.color.notColor=aq.color.notColor}else{az.colorR=aq.r;az.colorG=aq.g;az.colorB=aq.b;az.alpha=aq.a}az.color=z}if(az.shadowColor!==z){aq=s(az.shadowColor);az.shadowColorR=aq.r;az.shadowColorG=aq.g;az.shadowColorB=aq.b;az.shadowColorA=aq.a;az.shadowColor=z}if(m>1){var ar=this.animateQueue[this.animateQueue.length]={animateKeyCount:0};ar.animateFn=av||false;this.optns.animated=true;ar.duration=m;ar.step=0;ar.easing=at;ar.onstep=au}for(var ay in az){if(this["_"+ay]!==z&&az[ay]!==z){var ap=az[ay],aw="_"+ay;if(ap!=this[aw]){if(ap.charAt){if(ay=="string"){this._string=ap}else{if(ap.charAt(1)=="="){ap=this[aw]+parseInt(ap.charAt(0)+"1")*parseInt(ap.substr(2))}else{if(!V.test(ap)){ap=parseInt(ap)}else{this[aw]=ap}}}}if(m==1){this[aw]=ap}else{ar[aw]={from:this[aw],to:ap,prev:0};ar.animateKeyCount++}}}}if(m==1){if(az.rotateAngle){this.rotate(this._rotateAngle,this._rotateX,this._rotateY)}if(az.translateX||az.translateY){this.translate(this._translateX,this._translateY)}if(az.translateToX||az.translateToY){this.translate(this._translateToX,this._translateToY)}if(az.scaleX||az.scaleY){this.scale(this._scaleX,this._scaleY)}}j(this);return this};this.matrix=function(ap){if(ap===z){return[[this._transform11,this._transform21,this._transformdx],[this._transform12,this._transform22,this._transformdy]]}this._transform11=ap[0][0];this._transform21=ap[0][1];this._transform12=ap[1][0];this._transform22=ap[1][1];this._transformdx=ap[0][2];this._transformdy=ap[1][2];return this};this.translateTo=function(m,ax,ap,aq,ar,au){if(ap!==z){return this.animate({translateTo:{x:m,y:ax}},ap,aq,ar,au)}var aw=this.position(),av=0,at=0;if(m!==z){av=m-aw.x}if(ax!==z){at=ax-aw.y}return this.translate(av,at)};this.translate=function(m,au,ar,at,aq,ap){if(ar!==z){return this.animate({translate:{x:m,y:au}},ar,at,aq,ap)}this.optns.translateMatrix=o(this.optns.translateMatrix,[[1,0,m],[0,1,au]]);k(this);return this};this.scale=function(m,au,ar,at,aq,ap){if(ar!==z){return this.animate({scale:{x:m,y:au}},ar,at,aq,ap)}if(au===z){au=m}this.optns.scaleMatrix=o(this.optns.scaleMatrix,[[m,0,this._x*(1-m)],[0,au,this._y*(1-au)]]);k(this);return this};this.rotate=function(ay,ap,ax,ar,at,av,aw){if(ar!==z){return this.animate({rotate:{angle:ay,x:ap,y:ax}},ar,at,av,aw)}ay=ay/E;var aA=y(ay),au=L(ay),aq=0,m=0;if(ap!==z){if(ap=="center"){var az=this.getCenter("poor");if(ax===z){ap=az.x;ax=az.y}else{ap=az.x+ax.x;ax=az.y+ax.y}}aq=-ap*(aA-1)+ax*au;m=-ax*(aA-1)-ap*au}this.optns.rotateMatrix=o(this.optns.rotateMatrix,[[aA,-au,aq],[au,aA,m]]);k(this);return this};this.transform=function(au,at,aw,av,ap,m,ar){if(au===z){return this.matrix()}var aq=this.optns;if(ar!==z){aq.transformMatrix=[[au,aw,ap],[at,av,m]];aq.rotateMatrix=[[1,0,0],[0,1,0]];aq.scaleMatrix=[[1,0,0],[0,1,0]];aq.translateMatrix=[[1,0,0],[0,1,0]]}else{aq.transformMatrix=o(aq.transformMatrix,[[au,aw,ap],[at,av,m]])}k(this);return this};this.beforeDraw=function(ap){if(!this._visible){return false}var m=ap.ctx;m.save();if(this.optns.clipObject){var aq=this.optns.clipObject;aq._visible=true;if(aq.optns.animated){F.call(aq,ap)}aq.setOptns(m);m.beginPath();aq.draw(m);m.clip()}this.setOptns(m);if(this.optns.animated){F.call(this,ap)}m.beginPath();return true};this.clip=function(m){if(m===z){return this.optns.clipObject}ai(this).objs.splice(m.optns.number,1);this.optns.clipObject=m;return this};this.afterDraw=function(m){m.ctx.closePath();aj(this,m);m.ctx.restore();if(this.optns.clipObject){w.shape.prototype.afterDraw.call(this.optns.clipObject,m)}};this.isPointIn=function(ax,av,ap){var ar=D(this).optns,az=ar.ctx,at=false,m=this.optns,aq=false;if(ap!==z){ax-=ar.x;av-=ar.y}if(m.animated){at=true}m.animated=false;if(m.clipObject){var aw=m.clipObject,au=aw.optns;if(au.animated){aq=true;au.animated=false}}this.beforeDraw(ar);this.draw(az);var ay=K(this,ax,av);az.closePath();az.restore();m.animated=at;if(aq){au.animated=aq}if(ay){return true}return false};this.layer=function(m){return e(m,this,"objs")};this.canvas=function(m){return n(m,this,"objs")};this.draggable=function(at,ar,av){if(ar===z&&typeof at=="object"&&at.optns===z){ar=at.params;av=at.drag;var ap=at.start,aw=at.stop,au=at.disabled;at=at.object}var aq=this;var ax=this.optns.drag;if(typeof ar==="function"){av=ar;ar=z}if(typeof at=="function"){av=at;at=z}ax.shiftX=0;ax.shiftY=0;if(ar!==z){if(ar.shiftX!==z){ax.shiftX=ar.shiftX;ar.shiftX=z}if(ar.shiftY!==z){ax.shiftY=ar.shiftY;ar.shiftY=z}}if(at!==z){if(at.id){aq=(ar===z)?at.visible(false):at.animate(ar).visible(false)}if(at=="clone"){aq=this.clone(ar).visible(false);ax.type="clone"}}ax.val=true;ax.x=this._x;ax.y=this._y;ax.dx=this._transformdx;ax.dy=this._transformdy;ax.object=aq;ax.params=ar;ax.drag=av||false;ax.start=ap||false;ax.stop=aw||false;ax.disabled=au||false;var m=D(this).optns;m.mousemove.val=true;m.mousedown.val=true;m.mouseup.val=true;return this};this.droppable=function(m){this.optns.drop.val=true;if(m!==z){this.optns.drop.fn=m}return this};this.name=function(m){return this.attr("name",m)};this.visible=function(m){return this.attr("visible",m)};this.composite=function(m){return this.attr("composite",m)};this.id=function(m){if(m===z){return this.optns.id}this.optns.id=m;return this};this.opacity=function(m){return this.attr("opacity",m)};this.fadeIn=function(aq,ar,ap,m){return this.fadeTo(1,aq,ar,ap,m)};this.fadeOut=function(aq,ar,ap,m){return this.fadeTo(0,aq,ar,ap,m)};this.fadeTo=function(ar,aq,at,ap,m){if(aq===z){aq=600}return this.animate({opacity:ar},aq,at,ap,m)};this.fadeToggle=function(aq,ar,ap,m){if(this._opacity){this.fadeOut(aq,ar,ap,m)}else{this.fadeIn(aq,ar,ap,m)}return this};this.instanceOf=function(m){if(m===z){return this._proto}return this instanceof w[m]};this.base=function(ap,au,m){if(typeof ap=="object"){ap=ae(ap,{x:0,y:0,service:false});m=ap.service;au=ap.y;ap=ap.x}else{if(m===z){m=false}}var ar=ad[X];this.optns={animated:false,clipObject:false,drop:{val:false,fn:function(){}},drag:{val:false},layer:{id:ar.optns.id+"Layer0",number:0},canvas:{number:0},focused:false,buffer:{val:false},rotateMatrix:[[1,0,0],[0,1,0]],scaleMatrix:[[1,0,0],[0,1,0]],translateMatrix:[[1,0,0],[0,1,0]],transformMatrix:[[1,0,0],[0,1,0]]};this.animateQueue=[];this._x=ap;this._y=au;if(m==false&&ar!==z&&ar.layers[0]!==z){this.optns.layer.number=0;this.optns.canvas.number=X;var at=ai(this),aq=at.objs.length;this.optns.number=aq;this._level=aq?(at.objs[aq-1]._level+1):0;at.objs[aq]=this;this.optns.layer.id=at.optns.id;j(this)}return this};this._visible=true;this._composite="source-over";this._name="";this._opacity=1;this._shadowX=0;this._shadowY=0;this._shadowBlur=0;this._shadowColor="rgba(0,0,0,0)";this._shadowColorR=0;this._shadowColorG=0;this._shadowColorB=0;this._shadowColorA=0;this._translateX=0;this._translateY=0;this._scaleX=1;this._scaleY=1;this._rotateAngle=0;this._rotateX=0;this._rotateY=0;this._transform11=1;this._transform12=0;this._transform21=0;this._transform22=1;this._transformdx=0;this._transformdy=0;this._matrixChanged=false};w.object.prototype=new w.object();w.shape=function(){this.color=function(m){if(m===z){return[this._colorR,this._colorG,this._colorB,this._alpha]}return this.attr("color",m)};this.lineStyle=function(m){return this.attr(m)};this.setOptns=function(ap){w.shape.prototype.setOptns.call(this,ap);ap.lineWidth=this._lineWidth;ap.lineCap=this._cap;ap.lineJoin=this._join;ap.miterLimit=this._miterLimit;var aq=this.optns.color;if(aq.notColor===z){aq.val="rgba("+parseInt(this._colorR)+","+parseInt(this._colorG)+","+parseInt(this._colorB)+","+parseInt(this._alpha*100)/100+")"}else{var m=aq.notColor;var ar=ad[m.canvas].layers[m.layer];if(ar.grdntsnptrns[m.level]!==z){aq.val=ar.grdntsnptrns[m.level].val}}if(this._fill){ap.fillStyle=aq.val}else{ap.strokeStyle=aq.val}};this.afterDraw=function(m){if(this._fill){m.ctx.fill()}else{m.ctx.stroke()}w.shape.prototype.afterDraw.call(this,m)};this.base=function(m){if(m===z){m={}}if(m.color===z){m.color="rgba(0,0,0,1)"}else{if(!m.color.charAt&&m.color.id===z&&m.color.r===z){m.fill=m.color;m.color="rgba(0,0,0,1)"}}m=ae(m,{color:"rgba(0,0,0,1)",fill:0});w.shape.prototype.base.call(this,m);this._fill=m.fill;this.optns.color={val:m.color,notColor:z};return this.color(m.color)};this._colorR=0;this._colorG=0;this._colorB=0;this._alpha=0;this._lineWidth=1;this._cap="butt";this._join="miter";this._miterLimit=1};w.shape.prototype=new w.object;w.lines=function(){this.getCenter=function(aq){var m={x:this._x0,y:this._y0};for(var ap=1;ap<this.shapesCount;ap++){m.x+=this["_x"+ap];m.y+=this["_y"+ap]}m.x=m.x/this.shapesCount;m.y=m.y/this.shapesCount;return R(this,m,aq)};this.position=function(){return t(this._x0,this._y0,o(this.matrix(),ai(this).matrix()))};this.getRect=function(ar){var m,av,au=m=this._x0,at=av=this._y0;for(var ap=1;ap<this.shapesCount;ap++){if(au<this["_x"+ap]){au=this["_x"+ap]}if(at<this["_y"+ap]){at=this["_y"+ap]}if(m>this["_x"+ap]){m=this["_x"+ap]}if(av>this["_y"+ap]){av=this["_y"+ap]}}var aq={x:m,y:av,width:au-m,height:at-av};return b(this,aq,ar)};this.addPoint=function(){j(this);var ap=this.pointNames;for(var m=0;m<ap.length;m++){this[ap[m]+this.shapesCount]=arguments[m]}this.shapesCount++;return this};this.delPoint=function(ap,at,m){j(this);if(at===z){var ar=this.points();ar.splice(ap,1);this.points(ar)}else{m=m||0;for(var aq=0;aq<this.shapesCount;aq++){if(this["_x"+aq]<ap+m&&this["_x"+aq]>ap-m&&this["_y"+aq]<at+m&&this["_y"+aq]<at+m){this.delPoint(aq);aq--}}}return this};this.points=function(ar){var at=this.pointNames;if(ar===z){ar=[];for(var ap=0;ap<this.shapesCount;ap++){ar[ap]=[];for(var aq=0;aq<at.length;aq++){ar[ap][aq]=this[at[aq]+ap]}}return ar}j(this);var m=this.shapesCount;this.shapesCount=ar.length;for(ap=0;ap<this.shapesCount;ap++){for(aq=0;aq<at.length;aq++){this[at[aq]+ap]=ar[ap][aq]}}for(ap=this.shapesCount;ap<m;ap++){for(aq=0;aq<at.length;aq++){this[at[aq]+ap]=z}}return this};this.base=function(ap,m,aq){if(ap!==z){if(typeof ap.pop=="function"){ap={points:ap,color:m,fill:aq}}}w.lines.prototype.base.call(this,ap);this.shapesCount=0;if(ap!==z){if(ap.points!==z){this.points(ap.points)}}return this}};w.lines.prototype=new w.shape;w.line=function(){this.draw=function(m){if(this._x0===z){return}m.moveTo(this._x0,this._y0);for(var ap=1;ap<this.shapesCount;ap++){m.lineTo(this["_x"+ap],this["_y"+ap])}};this.base=function(ap,m,aq){w.line.prototype.base.call(this,ap,m,aq);return this};this._proto="line";this.pointNames=["_x","_y"]};w.line.prototype=new w.lines;w.qCurve=function(){this.draw=function(m){if(this._x0===z){return}m.moveTo(this._x0,this._y0);for(var ap=1;ap<this.shapesCount;ap++){m.quadraticCurveTo(this["_cp1x"+ap],this["_cp1y"+ap],this["_x"+ap],this["_y"+ap])}};this.base=function(ap,m,aq){w.qCurve.prototype.base.call(this,ap,m,aq);return this};this._proto="qCurve";this.pointNames=["_x","_y","_cp1x","_cp1y"]};w.qCurve.prototype=new w.lines;w.bCurve=function(){this.draw=function(m){if(this._x0===z){return}m.moveTo(this._x0,this._y0);for(var ap=1;ap<this.shapesCount;ap++){m.bezierCurveTo(this["_cp1x"+ap],this["_cp1y"+ap],this["_cp2x"+ap],this["_cp2y"+ap],this["_x"+ap],this["_y"+ap])}};this.base=function(ap,m,aq){w.bCurve.prototype.base.call(this,ap,m,aq);return this};this._proto="bCurve";this.pointNames=["_x","_y","_cp1x","_cp1y","_cp2x","_cp2y"]};w.bCurve.prototype=new w.lines;w.circle=function(){this.getCenter=function(m){return R(this,{x:this._x,y:this._y},m)};this.getRect=function(ap){var m={x:this._x-this._radius,y:this._y-this._radius};m.width=m.height=this._radius*2;return b(this,m,ap)};this.draw=function(m){m.arc(this._x,this._y,this._radius,0,v,true)};this.base=function(ap,at,m,aq,ar){if(typeof ap!="object"){ap={x:ap,y:at,radius:m,color:aq,fill:ar}}ap=ae(ap,{radius:0});w.circle.prototype.base.call(this,ap);this._radius=ap.radius;return this};this._proto="circle"};w.circle.prototype=new w.shape;w.rect=function(){this.getRect=function(m){return b(this,{x:this._x,y:this._y,width:this._width,height:this._height},m)};this.draw=function(m){m.rect(this._x,this._y,this._width,this._height)};this.base=function(ap,au,ar,m,aq,at){if(typeof ap!="object"){ap={x:ap,y:au,width:ar,height:m,color:aq,fill:at}}ap=ae(ap,{width:0,height:0});w.rect.prototype.base.call(this,ap);this._width=ap.width;this._height=ap.height;return this};this._proto="rect"};w.rect.prototype=new w.shape;w.arc=function(){this.getRect=function(aw){var ax={x:this._x,y:this._y},av=this._startAngle,m=this._endAngle,au=this._radius,ar=O(L(av/E)*au),at=O(y(av/E)*au),ay=O(L(m/E)*au),az=O(y(m/E)*au),aq=at>0&&az>0,ap=at<0&&az<0,aB=ar>0&&ay>0,aA=ar<0&&ay<0;ax.width=ax.height=au;if((this._anticlockwise&&av<m)||(!this._anticlockwise&&av>m)){if(((ap||(aq&&(aA||aB))))||(at==0&&az==0)){ax.y-=au;ax.height+=au}else{if(aq&&ay<0&&ar>0){ax.y+=ay;ax.height+=ay}else{if(az>0&&ay<0&&at<0){ax.y+=i(ay,ar);ax.height-=i(ay,ar)}else{if(aA){ax.y-=U(ay,ar)}else{ax.y-=au}ax.height+=U(ay,ar)}}}if(((aB||(aA&&(ap||aq))))||(ar==0&&ay==0)){ax.x-=au;ax.width+=au}else{if(ay<0&&ar>0){ax.x+=i(az,at);ax.width-=i(az,at)}else{if(ap){ax.x-=U(az,at)}else{ax.x-=au}ax.width+=U(az,at)}}}else{aq=at>=0&&az>=0;aB=ar>=0&&ay>=0;ap=at<=0&&az<=0;aA=ar<=0&&ay<=0;if(aA&&aq){ax.x+=i(az,at);ax.width-=i(az,at);ax.y+=i(ay,ar);ax.height+=U(ay,ar)}else{if(aA&&ap){ax.x+=i(az,at);ax.width+=U(az,at);ax.y+=i(ay,ar);ax.height+=U(ay,ar)}else{if(aA){ax.x+=i(az,at);ax.width+=U(az,at);ax.y-=au;ax.height+=U(ay,ar)}else{if(aq&&aB){ax.x+=i(az,at);ax.width=Z(az-at);ax.y+=i(ay,ar);ax.height-=i(ay,ar)}else{if(aB){ax.x+=i(az,at);ax.width=Z(az)+Z(at);ax.y+=i(ay,ar);ax.height-=i(ay,ar)}else{if(ap){ax.x-=au;ax.width+=U(az,at);ax.y-=au;ax.height+=U(ay,ar)}else{if(aq){ax.x-=au;ax.width+=U(az,at);ax.y-=au;ax.height+=au}}}}}}}}return b(this,ax,aw)};this.draw=function(m){m.arc(this._x,this._y,this._radius,this._startAngle/E,this._endAngle/E,this._anticlockwise)};this.base=function(ap,aw,m,at,ar,au,aq,av){if(au!==z){if(au.charAt){aq=au}if(au){au=true}else{au=false}}if(typeof ap!="object"){ap={x:ap,y:aw,radius:m,startAngle:at,endAngle:ar,anticlockwise:au,color:aq,fill:av}}ap=ae(ap,{radius:0,startAngle:0,endAngle:0,anticlockwise:true});w.arc.prototype.base.call(this,ap);this._radius=ap.radius;this._startAngle=ap.startAngle;this._endAngle=ap.endAngle;this._anticlockwise=ap.anticlockwise;return this};this._proto="arc"};w.arc.prototype=new w.shape;w.text=function(){this.font=function(m){return this.attr("font",m)};this._font="10px sans-serif";this.align=function(m){return this.attr("align",m)};this._align="start";this.baseline=function(m){return this.attr("baseline",m)};this._baseline="alphabetic";this.string=function(m){return this.attr("string",m)};this.position=function(){var ap={x:this._x,y:this._y},m=D(this).optns.ctx;ap.height=parseInt(this._font.match(Q)[0]);ap.y-=ap.height;m.save();m.textBaseline=this._baseline;m.font=this._font;m.textAlign=this._align;ap.width=m.measureText(this._string).width;m.restore();return b(this,ap)};this.getRect=function(aq){var ap={x:this._x,y:this._y},m=D(this).optns.ctx;ap.height=parseInt(this._font.match(Q)[0]);ap.y-=ap.height;m.save();m.textBaseline=this._baseline;m.font=this._font;m.textAlign=this._align;ap.width=m.measureText(this._string).width;if(this._align=="center"){ap.x-=ap.width/2}if(this._align=="right"){ap.x-=ap.width}m.restore();return b(this,ap,aq)};this.setOptns=function(m){w.text.prototype.setOptns.call(this,m);m.textBaseline=this._baseline;m.font=this._font;m.textAlign=this._align};this.draw=function(m){if(this._maxWidth===false){if(this._fill){m.fillText(this._string,this._x,this._y)}else{m.strokeText(this._string,this._x,this._y)}}else{if(this._fill){m.fillText(this._string,this._x,this._y,this._maxWidth)}else{m.strokeText(this._string,this._x,this._y,this._maxWidth)}}};this.base=function(aq,m,au,ar,ap,at){if(ar!==z){if(ar.charAt){if(ap!==z){at=ap}ap=ar;ar=false}}if(typeof aq!="object"){aq={string:aq,x:m,y:au,maxWidth:ar,color:ap,fill:at}}aq=ae(aq,{string:"",maxWidth:false,fill:1});w.text.prototype.base.call(this,aq);this._string=aq.string;this._maxWidth=aq.maxWidth;return this};this._proto="text"};w.text.prototype=new w.shape;w.grdntsnptrn=function(){this.layer=function(ap){return e(ap,this,"grdntsnptrns")};this.canvas=function(ap){return n(ap,this,"grdntsnptrns")};var m=new w.object;this.animate=m.animate;this.attr=m.attr;this.id=m.id;this.name=m.name;this.level=m.level;this.base=function(){this.animateQueue=[];this.optns={animated:false,name:"",layer:{id:ad[0].optns.id+"Layer_0",number:0},canvas:{number:0},visible:true};this.optns.layer.id=ad[X].optns.id+"Layer_0";this.optns.layer.number=0;this.optns.canvas.number=X;var ap=ad[X].layers[0].grdntsnptrns;this._level=ap.length;ap[this._level]=this;j(this)};return this};w.gradients=function(){this.colorStopsCount=0;this.paramNames=["_pos","_colorR","_colorG","_colorB","_alpha"];this.addColorStop=function(ar,ap){j(this);var m=s(ap);var aq=this.colorStopsCount;this["_pos"+aq]=ar;this["_colorR"+aq]=m.r;this["_colorG"+aq]=m.g;this["_colorB"+aq]=m.b;this["_alpha"+aq]=m.a;this.colorStopsCount++;return this};this.animate=function(at,av,aw,au,ar){for(var aq in at){if(aq.substr(0,5)=="color"){var ap=aq.substring(5);var m=s(at[aq]);at["colorR"+ap]=m.r;at["colorG"+ap]=m.g;at["colorB"+ap]=m.b;at["alpha"+ap]=m.a}}w.gradients.prototype.animate.call(this,at,av,aw,au,ar)};this.delColorStop=function(ap){j(this);var m=this.colorStops();m.splice(ap,1);if(m.length>0){this.colorStops(m)}else{this.colorStopsCount=0}return this};this.colorStops=function(au){var at=this.paramNames;if(au===z){au=[];for(var aq=0;aq<this.colorStopsCount;aq++){au[aq]=[];for(var ar=0;ar<at.length;ar++){au[aq][ar]=this[at[ar]+aq]}}return au}j(this);var ap=this.colorStopsCount;var m=au.length;if(au[0].length==2){for(aq=0;aq<m;aq++){this.addColorStop(au[aq][0],au[aq][1])}}else{for(aq=0;aq<m;aq++){for(ar=0;ar<at.length;ar++){this[at[ar]+aq]=au[aq][ar]}}}for(aq=m;aq<ap;aq++){for(ar=0;ar<at.length;ar++){this[at[ar]+aq]=z}}this.colorStopsCount=m;return this};this.base=function(m){w.gradients.prototype.base.call(this);if(m==z){return this}else{return this.colorStops(m)}}};w.gradients.prototype=new w.grdntsnptrn;w.pattern=function(){this.create=function(m){if(this.optns.animated){F.call(this,m)}this.val=m.ctx.createPattern(this._img,this._type)};this.base=function(ap,m){if(ap.onload){ap={image:ap,type:m}}ap=ae(ap,{type:"repeat"});w.pattern.prototype.base.call(this);this._img=ap.image;this._type=ap.type;return this};this._proto="pattern"};w.pattern.prototype=new w.grdntsnptrn;w.lGradient=function(){this.create=function(ap){if(this.optns.animated){F.call(this,ap)}this.val=ap.ctx.createLinearGradient(this._x1,this._y1,this._x2,this._y2);for(var m=0;m<this.colorStopsCount;m++){this.val.addColorStop(this["_pos"+m],"rgba("+parseInt(this["_colorR"+m])+","+parseInt(this["_colorG"+m])+","+parseInt(this["_colorB"+m])+","+this["_alpha"+m]+")")}};this.base=function(aq,at,ap,ar,m){if(typeof aq!=="object"){aq={x1:aq,y1:at,x2:ap,y2:ar,colors:m}}aq=ae(aq,{x1:0,y1:0,x2:0,y2:0});w.lGradient.prototype.base.call(this,aq.colors);this._x1=aq.x1;this._y1=aq.y1;this._x2=aq.x2;this._y2=aq.y2;return this};this._proto="lGradient"};w.lGradient.prototype=new w.gradients;w.rGradient=function(){this.create=function(ap){if(this.optns.animated){F.call(this)}this.val=ap.ctx.createRadialGradient(this._x1,this._y1,this._r1,this._x2,this._y2,this._r2);for(var m=0;m<this.colorStopsCount;m++){this.val.addColorStop(this["_pos"+m],"rgba("+parseInt(this["_colorR"+m])+","+parseInt(this["_colorG"+m])+","+parseInt(this["_colorB"+m])+","+this["_alpha"+m]+")")}};this.base=function(at,av,ar,aq,au,ap,m){if(typeof at!=="object"){at={x1:at,y1:av,r1:ar,x2:aq,y2:au,r2:ap,colors:m}}at=ae(at,{x1:0,y1:0,r1:0,x2:0,y2:0,r2:0});w.rGradient.prototype.base.call(this,at.colors);this._x1=at.x1;this._y1=at.y1;this._r1=at.r1;this._x2=at.x2;this._y2=at.y2;this._r2=at.r2;return this};this._proto="rGradient"};w.rGradient.prototype=new w.gradients;w.layer=function(){this.position=function(){var at=this.objs,ar,m,aq,ap=at.length;for(aq=0;aq<ap;aq++){m=at[aq].position();if(ar===z){ar=m}if(ar.x>m.x){ar.x=m.x}if(ar.y>m.y){ar.y=m.y}}return ar};this.getRect=function(ar){var au=this.objs,aq,at,ap,m=au.length;if(au.length==0){return false}if(ar=="coords"){for(ap=0;ap<m;ap++){at=au[ap].getRect(ar);if(aq===z){aq=at}if(aq[0][0]>at[0][0]){aq[0][0]=at[0][0]}if(aq[0][1]>at[0][1]){aq[0][1]=at[0][1]}if(aq[1][0]<at[1][0]){aq[1][0]=at[1][0]}if(aq[1][1]>at[1][1]){aq[1][1]=at[1][1]}if(aq[2][0]>at[2][0]){aq[2][0]=at[2][0]}if(aq[2][1]<at[2][1]){aq[2][1]=at[2][1]}if(aq[3][0]<at[3][0]){aq[3][0]=at[3][0]}if(aq[3][1]<at[3][1]){aq[3][1]=at[3][1]}}return aq}for(ap=0;ap<m;ap++){at=au[ap].getRect(ar);at.right=at.width+at.x;at.bottom=at.height+at.y;if(aq===z){aq=at}if(aq.x>at.x){aq.x=at.x}if(aq.y>at.y){aq.y=at.y}if(aq.right<at.right){aq.right=at.right}if(aq.bottom<at.bottom){aq.bottom=at.bottom}}aq.width=aq.right-aq.x;aq.height=aq.bottom-aq.y;return aq};this.canvas=function(ap){if(ap===z){return this.idCanvas}if(this.optns.canvas.id==ap){return this}var at=-1,m=0,av=ad.length;for(var ar=0;ar<av;ar++){var au=ad[ar].optns.id;if(au==ap){at=ar}if(au==this.optns.canvas.id){m=ar}}if(at<0){at=ad.length;P.canvas(ap)}this.optns.canvas.id=ap;this.optns.canvas.number=at;ad[m].layers.splice(this.optns.number,1);var aq=ad[at].layers;this._level=this.optns.number=aq.length;aq[this._level]=this;l(this.objs,this.optns.id,this._level,ap,at);l(this.grdntsnptrns,this.optns.id,this._level,ap,at);ad[at].optns.redraw=1;return this};this.up=function(ap){if(ap===z){ap=1}if(ap=="top"){this.level(ap)}else{var m=D(this).layers[this.optns.number+ap];if(m!==z){ap=m._level+1-this._level}this.level(this._level+ap)}return this};this.down=function(ap){if(ap==z){ap=1}if(ap=="bottom"){this.level(ap)}else{var m=D(this).layers[this.optns.number-ap];if(m!==z){ap=this._level-(m._level-1)}this.level(this._level-ap)}return this};this.level=function(aq){if(aq==z){return this._level}var ap=D(this),m=ap.optns;if(aq=="bottom"){if(this.optns.number==0){aq=this._level}else{aq=ap.layers[0]._level-1}}if(aq=="top"){if(this.optns.number==ap.layers.length-1){aq=this._level}else{aq=ap.layers[ap.layers.length-1]._level+1}}this._level=aq;m.anyLayerLevelChanged=true;m.redraw=1;return this};this.del=function(){var m=D(this).optns;m.anyLayerDeleted=true;this.draw=false;m.redraw=1;return};this.setOptns=function(m){m.setTransform(1,0,0,1,0,0);w.layer.prototype.setOptns.call(this,m);return this};this.afterDraw=function(m){m.ctx.closePath();m.ctx.restore();if(this.optns.clipObject){w.layer.prototype.afterDraw.call(this.optns.clipObject,m)}};this.clone=function(aq,m){var ap=P.layer(aq);J(ap,this);J(ap.optns.transformMatrix,this.optns.transformMatrix);J(ap.optns.translateMatrix,this.optns.translateMatrix);J(ap.optns.scaleMatrix,this.optns.scaleMatrix);J(ap.optns.rotateMatrix,this.optns.rotateMatrix);ap.canvas(D(this).optns.id);if(m===z){return ap}return ap.animate(m)};this.isPointIn=function(m,at,aq){var ar=this.objs,ap;for(ap=0;ap<ar.length;ap++){if(ar[ap].isPointIn(m,at,aq)){return true}}return false};this.opacity=function(aq){var ap=this.objs;for(var m=0;m<ap.length;m++){ap[m].attr("opacity",aq)}return this};this.fadeTo=function(au,ar,av,aq,ap){if(ar===z){ar=600}var at=this.objs;for(var m=0;m<at.length;m++){at[m].animate({opacity:au},ar,av,aq,ap)}return this};this.draw=function(av){var aq=this.optns,at=aq.buffer,m=av.ctx;if(at.val){m.drawImage(at.cnv,at.x,at.y);return this}for(var ar=0;ar<this.grdntsnptrns.length;ar++){this.grdntsnptrns[ar].create(av)}if(aq.anyObjLevelChanged){T(this.objs);aq.anyObjLevelChanged=false}if(aq.anyObjDeleted){W(this.objs);aq.anyObjDeleted=false}m.globalCompositeOperation=aq.gCO;for(ar=0;ar<this.objs.length;ar++){var ap=this.objs[ar];if(typeof(ap.draw)=="function"){this.setOptns(m);if(ap.beforeDraw(av)){if(typeof(ap.draw)=="function"){var au=ap.optns.buffer;if(au.val){m.drawImage(au.cnv,au.x,au.y)}else{ap.draw(m)}if(at.optns){ap.afterDraw(at.optns)}else{ap.afterDraw(av)}}}}}return this};this.objects=function(aq){var ap=G(),m=0;while(this.objs[m]!==z){ap.elements[m]=this.objs[m++]}if(aq!==z){return ap.find(aq)}return ap};this.base=function(au){var ap=ad[X],at=ap.layers,aq=ap.optns;w.layer.prototype.base.call(this,0,0,true);var m=at.length;at[m]=this;this.objs=[];this.grdntsnptrns=[];this._level=m?(at[m-1]._level+1):0;this.optns.number=m;this.optns.id=au;var ar=this.optns;ar.anyObjDeleted=false;ar.anyObjLevelChanged=false;ar.gCO=aq.gCO;ar.canvas.id=aq.id;ar.canvas.number=X;return this};this._proto="layer"};w.layer.prototype=new w.object;function aa(ap){var m=new w.layer();return m.base(ap)}w.imageData=function(){this.filter=function(m,aq){var ap=g[m];ap.fn.call(this,this._width,this._height,ap.matrix,aq);return this};this.getRect=function(ap){var m={x:this._x,y:this._y,width:this._width,height:this._height};return b(this,m,ap)};this.setPixel=function(ap,at,aq){var m,ar=(ap+at*this._width)*4;if(aq.r!==z){m=aq}else{if(aq[0]!==z){if(!aq.charAt){m={r:aq[0],g:aq[1],b:aq[2],a:aq[3]}}else{m=s(aq)}}}this._data[ar+0]=m.r;this._data[ar+1]=m.g;this._data[ar+2]=m.b;this._data[ar+3]=m.a*255;j(this);return this};this.getPixel=function(m,aq){var ap=(m+aq*this._width)*4;return[this._data[ap+0],this._data[ap+1],this._data[ap+2],this._data[ap+3]/255]};this._getX=0;this._getY=0;this.getData=function(ap,au,ar,m){this._getX=ap;this._getY=au;this._width=ar;this._height=m;var aq=D(this).optns.ctx;try{this._imgData=aq.getImageData(this._getX,this._getY,this._width,this._height)}catch(at){netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead");this._imgData=aq.getImageData(this._getX,this._getY,this._width,this._height)}this._data=this._imgData.data;j(this);return this};this.putData=function(m,ap){if(m!==z){this._x=m}if(ap!==z){this._y=ap}this._putData=true;j(this);return this};this.clone=function(){var m=w.imageData.prototype.clone.call(this);m._imgData=z;return m};this.draw=function(m){if(this._imgData===z){this._imgData=m.createImageData(this._width,this._height);for(var ap=0;ap<this._width*this._height*4;ap++){this._imgData.data[ap]=this._data[ap]}this._data=this._imgData.data}if(this._putData){m.putImageData(this._imgData,this._x,this._y)}};this.base=function(at,m){w.imageData.prototype.base.call(this);if(m===z){var au=at;if(au._width!==z){at=au._width;m=au._height}else{at=ae(at,{width:0,height:0});m=at.height;at=at.width}}this._width=at;this._height=m;this._data=[];for(var ar=0;ar<this._width;ar++){for(var aq=0;aq<this._height;aq++){var ap=(ar+aq*this._width)*4;this._data[ap+0]=0;this._data[ap+1]=0;this._data[ap+2]=0;this._data[ap+3]=0}}return this};this._putData=false;this._proto="imageData"};w.imageData.prototype=new w.object;w.image=function(){this.getRect=function(ap){var m={x:this._x,y:this._y,width:this._width,height:this._height};return b(this,m,ap)};this.draw=function(m){m.drawImage(this._img,this._sx,this._sy,this._swidth,this._sheight,this._x,this._y,this._width,this._height)};this.base=function(aq,aw,at,m,ax,av,au,ar,ap){if(typeof aq!="object"||aq.src!==z){aq={image:aq,x:aw,y:at,width:m,height:ax,sx:av,sy:au,swidth:ar,sheight:ap}}aq=ae(aq,{width:false,height:false,sx:0,sy:0,swidth:false,sheight:false});if(aq.width===false){aq.width=aq.image.width;aq.height=aq.image.height}if(aq.swidth===false){aq.swidth=aq.image.width;aq.sheight=aq.image.height}w.image.prototype.base.call(this,aq);this._img=aq.image;this._width=aq.width;this._height=aq.height;this._sx=aq.sx;this._sy=aq.sy;this._swidth=aq.swidth;this._sheight=aq.sheight;return this};this._proto="image"};w.image.prototype=new w.object;w.groups=function(){for(var m in w){if(m=="group"||m=="groups"){continue}var aq=new w[m];for(var ap in aq){if(typeof aq[ap]=="function"&&this[ap]===z){(function(at,ar){at[ar]=function(){var ax=[];var au=[];var aw=0;while(arguments[aw]!==z){au[aw]=arguments[aw++]}for(aw=0;aw<this.elements.length;aw++){var av=this.elements[aw];J(ax,au);if(typeof av[ar]=="function"){av[ar].apply(av,ax)}}return this}})(this,ap)}}}this.reverse=function(){var ar=this.elements;this.elements=this.unmatchedElements;this.unmatchedElements=ar;return this};this.end=function(ar){if(this.previousGroup===z||ar===0){return this}if(ar!==z){ar--}return this.previousGroup.end(ar)};this.find=function(ar){var aA=G(),az=ar.attrs,aB=ar.fns||[],au,at,av,aC,ay,ax,aw;aA.previousGroup=this;for(au=0;au<this.elements.length;au++){aA.elements[au]=this.elements[au]}if(az!==z){for(at in az){if(az.hasOwnProperty(at)){if(typeof az[at]!="object"){az[at]={val:az[at],rel:"=="}}aB[aB.length]={fn:"attr",args:[at],val:az[at].val,rel:az[at].rel}}}}if(aB.length){for(au=0;au<aA.elements.length;au++){av=aA.elements[au];for(at=0;at<aB.length;at++){ay=aB[at];aw=ay.val;aC=ay.rel;if(typeof av[ay.fn]=="function"){ax=av[ay.fn].apply(av,ay.args)}else{aC="del"}switch(aC){case"!=":if(!(ax!=aw)){aC="del"}break;case"!==":if(!(ax!==aw)){aC="del"}break;case"==":if(!(ax==aw)){aC="del"}break;case"===":if(!(ax===aw)){aC="del"}break;case">=":if(!(ax>=aw)){aC="del"}break;case"<=":if(!(ax<=aw)){aC="del"}break;case">":if(!(ax>aw)){aC="del"}break;case"<":if(!(ax<aw)){aC="del"}break;case"typeof":if(!(typeof ax==aw)){aC="del"}break}if(aC=="del"){aA.unmatchedElements[aA.unmatchedElements.length]=av;aA.elements.splice(au,1);au--;break}}}}return aA};this.base=function(){this.elements=[];this.unmatchedElements=[];return this}};w.group=function(){this._proto="group"};w.group.prototype=new w.groups;function G(){var m=new w.group;return m.base()}P.addFunction=function(ap,aq,m){w[m||"object"].prototype[ap]=aq;return P};P.addObject=function(aq,at,m,ar){w[aq]=function(au){this.draw=w[au].draw;this.base=w[au].base;this._proto=au};var ap=w[aq];if(ar===z){ar="shape"}ap.prototype=new w[ar];ap.draw=m;ap.base=function(av,ay,au){ap.prototype.base.call(this,ay);var ax=0;for(var aw in ay){this["_"+aw]=au[ax]||ay[aw];if(aw=="color"){this.color(au[ax]||ay[aw])}ax++}return this};(function(au,av){P[au]=function(){var aw=new w[au](au);return aw.base(au,av,arguments)}})(aq,at);return P};P.addAnimateFunction=function(m,ap){h[m]=ap;return P};P.addImageDataFilter=function(m,ap){if(g[m]===z){g[m]={}}if(ap.fn!==z){g[m].fn=ap.fn}if(ap.matrix!==z&&ap.type===z){g[m].matrix=ap.matrix}if(ap.type!==z){g[m].matrix[type]=ap.matrix}return P};P.clear=function(m){if(ad[0]===z){return P}if(m===z){ad[0].clear();return P}P.canvas(m).clear();return P};P.pause=function(m){if(m===z){ad[0].pause();return P}P.canvas(m).pause();return P};P.start=function(m,ap){P.canvas(m).start(ap);return P};P.pattern=function(m,ap){var aq=new w.pattern;return aq.base(m,ap)};P.lGradient=function(aq,at,ap,ar,m){var au=new w.lGradient;return au.base(aq,at,ap,ar,m)};P.rGradient=function(at,av,ar,aq,au,ap,m){var aw=new w.rGradient;return aw.base(at,av,ar,aq,au,ap,m)};P.line=function(aq,ap,ar){var m=new w.line;return m.base(aq,ap,ar)};P.qCurve=function(aq,m,ar){var ap=new w.qCurve;return ap.base(aq,m,ar)};P.bCurve=function(ap,m,ar){var aq=new w.bCurve;return aq.base(ap,m,ar)};P.imageData=function(ap,m){var aq=new w.imageData;return aq.base(ap,m)};P.image=function(at,ax,au,m,ay,aw,av,ar,ap){var aq=new w.image;return aq.base(at,ax,au,m,ay,aw,av,ar,ap)};P.circle=function(ap,au,m,aq,at){var ar=new w.circle;return ar.base(ap,au,m,aq,at)};P.rect=function(ap,av,ar,m,aq,au){var at=new w.rect;return at.base(ap,av,ar,m,aq,au)};P.arc=function(aw,av,at,au,ap,aq,ar,ax){var m=new w.arc;return m.base(aw,av,at,au,ap,aq,ar,ax)};P.text=function(aq,m,av,ar,ap,at){var au=new w.text;return au.base(aq,m,av,ar,ap,at)};P.canvas=function(ap){if(ap===z){return ad[0]}var m=ad.length;for(var ar=0;ar<m;ar++){if(ad[ar].optns){if(ad[ar].optns.id==ap){return ad[ar]}}}var aq={id:function(at){if(at===z){return this.optns.id}this.optns.id=at;return this}};ad[m]=aq;X=m;aq.cnv=document.getElementById(ap);if("\v"=="v"){if(typeof G_vmlCanvasManager!=="undefined"){G_vmlCanvasManager.initElement(aq.cnv)}if(typeof FlashCanvas!=="undefined"){FlashCanvas.initElement(aq.cnv)}}aq.width=function(at){if(at===z){return this.cnv.width}this.optns.width=this.cnv.width=at;this.cnv.style.width=at+"px";this.optns.redraw=1;return this};aq.height=function(at){if(at===z){return this.cnv.height}this.optns.heigth=this.cnv.height=at;this.cnv.style.height=at+"px";this.optns.redraw=1;return this};aq.optns={id:ap,number:X,ctx:aq.cnv.getContext("2d"),width:aq.cnv.offsetWidth||aq.cnv.width,height:aq.cnv.offsetHeight||aq.cnv.height,anyLayerDeleted:false,anyLayerLevelChanged:false,keyDown:{val:false,code:false},keyUp:{val:false,code:false},keyPress:{val:false,code:false},mousemove:{val:false,x:false,y:false,object:false},click:{val:false,x:false,y:false,objects:[]},dblclick:{val:false,x:false,y:false,objects:[]},mouseup:{val:false,x:false,y:false,objects:[]},mousedown:{val:false,x:false,y:false,objects:[]},drag:{object:false,x:0,y:0},gCO:"source-over",redraw:1};aq.toDataURL=function(){return aq.cnv.toDataURL.apply(aq.cnv,arguments)};aq.layers=[];aq.interval=0;P.layer(ap+"Layer_0").canvas(ap);aq.start=function(av){X=this.optns.number;if(av){if(this.interval){return this}this.isAnimated=av;var aw=C(this.cnv);this.optns.x=aw.left+(parseInt(this.cnv.style.borderTopWidth)||0);this.optns.y=aw.top+(parseInt(this.cnv.style.borderLeftWidth)||0);var au=ad[this.optns.number],at=au.optns;this.cnv.onclick=function(ax){u(ax,"click",at)};this.cnv.ondblclick=function(ay){u(ay,"dblclick",at);var ax=at.mousemove.val;at.mousemove.val=true;setTimeout(function(){at.mousemove.val=ax},3000)};this.cnv.onmousedown=function(ax){u(ax,"mousedown",at)};this.cnv.onmouseup=function(ax){u(ax,"mouseup",at)};this.cnv.onkeyup=function(ax){af(ax,"keyUp",at)};this.cnv.onkeydown=function(ax){af(ax,"keyDown",at)};this.cnv.onkeypress=function(ax){af(ax,"keyPress",at)};this.cnv.onmouseout=this.cnv.onmousemove=function(ax){u(ax,"mousemove",at)};at.timeLast=new Date();this.interval=c(function(ax){au.interval=au.interval||1;au.frame(ax)},this.cnv)}else{return this.frame()}return this};aq.pause=function(){I(this.interval);this.interval=0};aq.del=function(){I(this.interval);this.layers=[];ad.splice(this.optns.number,1);for(var aw=0;aw<ad.length;aw++){var au=ad[aw],ax=au.layers,ay=ax.length;au.optns.number=aw;for(var at=0;at<ay;at++){var av=ax[at];av.optns.canvas.number=aw;l(av.objs,av.optns.id,av.optns.number,au.optns.id,au.optns.number);l(av.grdntsnptrns,av.optns.id,av.optns.number,au.optns.id,au.optns.number)}}if(this.cnv.parentNode){this.cnv.parentNode.removeChild(this.cnv)}X=0;return false};aq.clear=function(){I(this.interval);this.interval=0;this.layers=[];P.layer(this.optns.id+"Layer_0").canvas(this.optns.id);this.optns.ctx.clearRect(0,0,this.optns.width,this.optns.height);this.optns.redraw++;return this};aq.frame=function(aw){var ax=this.optns,au=this;aw=aw||(new Date());ax.timeDiff=aw-ax.timeLast;ax.timeLast=aw;if(this.interval){this.interval=c(function(aS){au.frame(aS)},au.cnv);this.interval=this.interval||1}if(!ax.redraw){return this}ax.redraw--;ax.ctx.clearRect(0,0,ax.width,ax.height);if(this.layers.length==0){return this}m=this.layers.length;if(ax.anyLayerLevelChanged){m=T(this.layers)}if(ax.anyLayerDeleted){m=W(this.layers)}if(ax.anyLayerLevelChanged||ax.anyLayerDeleted){ax.anyLayerLevelChanged=ax.anyLayerDeleted=false;for(var aF=0;aF<m;aF++){var aQ=this.layers[aF],ay=aQ.optns;l(aQ.objs,ay.id,ay.number,this.optns.id,this.optns.number);l(aQ.grdntsnptrns,ay.id,ay.number,ap,this.optns.number)}}for(aF=0;aF<m;aF++){var aR=this.layers[aF];if(typeof(aR.draw)=="function"){if(aR.beforeDraw(ax)){if(typeof(aR.draw)=="function"){aR.draw(ax);aR.afterDraw(ax)}}}}var aI=ax.mousemove;var aO=ax.mousedown;var aL=ax.mouseup;var az=this.optns.click;var aG=this.optns.dblclick;if(aI.x!=false){if(ax.drag.object!=false){var aH=ax.drag,at=aH.object;at.translate(aI.x-aH.x,aI.y-aH.y);aH.x=aI.x;aH.y=aI.y;if(aH.drag){aH.drag.call(at,{x:aI.x,y:aI.y})}}var aB=this.optns.point||{};aB.event=aI.event;if(aI.object!=false){var aJ=aI.object;if(N===aJ){if(typeof aJ.onmousemove=="function"){aJ.onmousemove(aB)}}else{if(N!=false){if(typeof N.onmouseout=="function"){N.onmouseout(aB)}}if(typeof aJ.onmouseover=="function"){aJ.onmouseover(aB)}N=aJ}}else{if(N!==false){if(typeof N.onmouseout=="function"){N.onmouseout(aB)}N=false}}ax.mousemove.object=false}if(aO.objects.length){var aM=aO.objects.length-1;mdCicle:for(aF=aM;aF>-1;aF--){var aP=[aO.objects[aF],ai(aO.objects[aF])],aN;for(var aD=0;aD<2;aD++){aN=aP[aD];if(aN.optns.drag.val==true&&aN.optns.drag.disabled==false&&aF==aM){aH=ax.drag;at=aH.object=aN.optns.drag.object.visible(true);aH.drag=aN.optns.drag.drag;aH.init=aN;var aE=aH.init.optns;if(aE.drag.params!==z){at.animate(aE.drag.params)}aH.x=aH.startX=aO.x;aH.y=aH.startY=aO.y;if(at!=aH.init&&aE.drag.type!="clone"){aB=ac(aO.x,aO.y,at.matrix());at.translate(aB.x-at._x,aB.y-at._y)}at.translate(aE.drag.shiftX,aE.drag.shiftY);if(typeof aE.drag.start=="function"){aE.drag.start.call(at,{x:aO.x,y:aO.y})}}if(typeof aN.onmousedown=="function"){if(aN.onmousedown({x:aO.x,y:aO.y,event:aO.event})===false){break mdCicle}}}}aO.objects=[]}if(aL.objects.length){muCicle:for(aF=aL.objects.length-1;aF>-1;aF--){var aA=[aL.objects[aF],ai(aL.objects[aF])],av;aH=ax.drag;for(aD=0;aD<2;aD++){av=aA[aD];if(ax.drag.init!==z){if(av.optns.drop.val==true){if(aH.init==aH.object){aH.init.visible(true)}if(typeof av.optns.drop.fn=="function"){av.optns.drop.fn.call(av,aH.init)}}else{aH.object.visible(false);aH.init.visible(true);aH.init.optns.translateMatrix[0][2]=aH.object.optns.translateMatrix[0][2];aH.init.optns.translateMatrix[1][2]=aH.object.optns.translateMatrix[1][2];k(aH.init);if(aH.object!=aH.init){aH.object.visible(false)}if(typeof aH.init.optns.drag.stop=="function"){aH.init.optns.drag.stop.call(aH.init,{x:aL.x,y:aL.y})}}if(aH.x!=aH.startX||aH.y!==aH.startY){az.objects=[]}}if(typeof av.onmouseup=="function"){if(av.onmouseup({x:aL.x,y:aL.y,event:aL.event})===false){break muCicle}}}}this.optns.drag={object:false,x:0,y:0};aL.objects=[]}if(az.objects.length){cCicle:for(aF=az.objects.length-1;aF>-1;aF--){var aC=[az.objects[aF],ai(az.objects[aF])];for(aD=0;aD<2;aD++){if(typeof aC[aD].onclick=="function"){if(aC[aD].onclick({x:az.x,y:az.y,event:az.event})===false){break cCicle}}}}az.objects=[]}if(aG.objects.length){dcCicle:for(aF=aG.objects.length-1;aF>-1;aF--){var aK=[aG.objects[aF],ai(aG.objects[aF])];for(aD=0;aD<2;aD++){if(typeof aK[aD].ondblclick=="function"){if(aK[aD].ondblclick({x:aG.x,y:aG.y,event:aG.event})===false){break dcCicle}}}}aG.objects=[]}ax.keyUp.val=ax.keyDown.val=ax.keyPress.val=az.x=aG.x=aL.x=aO.x=aI.x=false;return this};return aq};P.layer=function(ar){if(ar===z){return ad[0].layers[0]}for(var aq=0;aq<ad.length;aq++){var ap=ad[aq].layers;for(var m=0;m<ap.length;m++){if(ap[m].optns.id==ar){return ap[m]}}}return aa(ar)};ab.jCanvaScript=ab.jc=P})(window,undefined);